#!/usr/bin/env sh

# Exit on error
set -e;

# Current directory for genesis
if [ -z "$GENESIS_DIR" ]; then
  DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
  GENESIS_ROOT="${DIR}/..";
fi

# Load libraries
source "${GENESIS_ROOT}/lib/utils.sh"
source "${GENESIS_ROOT}/lib/xcode.sh"
source "${GENESIS_ROOT}/lib/homebrew.sh"
source "${GENESIS_ROOT}/lib/gcc.sh"

debug_log "* Genesis is starting *" 
debug_log "Root is set to ${GENESIS_ROOT}"

# Configuration

GENESIS_HOMEBREW_VERSION=0.9.2

# Lets do this

# Exit if XCode command line tools is not installed
if ! ensure_xcode; then
  exit 1;
fi

ensure_homebrew;
ensure_gcc;

debug_log "Genesis is done";
exit 0;
